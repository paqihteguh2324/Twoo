(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{4830:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return i(6767)}])},1833:function(e,n,i){"use strict";var t=i(5893),r=i(7294),o=i(2293),a=i(7357),s=i(155),l=i(3946),c=i(5861),d=i(3156),u=i(9661);n.Z=function(e){let{title:n="Twoo Gift"}=e,[i,h]=r.useState(null);return(0,t.jsx)(o.Z,{position:"fixed",sx:{backgroundColor:"#FFB6C1",color:"#eee"},children:(0,t.jsx)(d.Z,{maxWidth:"xl",children:(0,t.jsxs)(s.Z,{disableGutters:!0,children:[(0,t.jsx)(u.Z,{src:"/static/twoo/Logo/logo.jpg"}),(0,t.jsx)(c.Z,{variant:"h6",noWrap:!0,component:"a",href:"#app-bar-with-responsive-menu",sx:{mx:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:n}),(0,t.jsx)(a.Z,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:(0,t.jsx)(l.Z,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e=>{h(e.currentTarget)},color:"inherit"})}),(0,t.jsx)(c.Z,{variant:"h5",noWrap:!0,component:"a",href:"#app-bar-with-responsive-menu",sx:{mr:2,display:{xs:"flex",md:"none"},flexGrow:1,fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:n}),(0,t.jsx)(a.Z,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}}})]})})})}},9881:function(e,n,i){"use strict";i.d(n,{t:function(){return a}});var t=i(3977),r=i(6650);let o=(0,t.ZF)({apiKey:"AIzaSyAeT1TbAXsGpJyU1ECz82Z-xUPnwUy5h78",authDomain:"twoo-359ce.firebaseapp.com",projectId:"twoo-359ce",storageBucket:"twoo-359ce.appspot.com",messagingSenderId:"985313088792",appId:"1:985313088792:web:d85cc8ff03e7cd00e9ba6d",measurementId:"G-TRDH0BBX42"}),a=(0,r.cF)(o)},6767:function(e,n,i){"use strict";i.r(n);var t=i(5893),r=i(7294),o=i(1833),a=i(7357),s=i(9417),l=i(2882),c=i(629),d=i(7906),u=i(3184),h=i(3816),x=i(3252),m=i(295),p=i(5843),f=i(1737),g=i(8703),j=i(7084),Z=i(5121),v=i(5481);n.default=()=>{let[e,n]=(0,r.useState)([]),[i,y]=(0,r.useState)(!1),[C,b]=(0,r.useState)(0),[w,k]=(0,r.useState)(),[P,T]=(0,r.useState)(!1),[F,S]=(0,r.useState)(!1),[E,I]=(0,r.useState)({open:!1,severity:"success",message:"Sukses"});async function _(){try{let e=await fetch("/api/product");if(e.ok){let i=await e.json();n(i)}else throw Error("Failed to fetch products")}catch(e){console.error("Error fetching products:",e)}}let A=e=>{q(e),T(!1)};async function q(e){try{let n=await Z.Z.delete("/api/product/".concat(e));if(200===n.status)_(),I({...E,open:!0,severity:"success",message:"Berhasil Delete Product"});else throw Error("Failed to delete product")}catch(e){console.error("Error deleting product:",e)}}return(0,r.useEffect)(()=>{_()},[i]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Z,{title:"Twoo Gift Admin"}),(0,t.jsxs)(a.Z,{height:"100vh",pt:"90px",px:2,sx:{backgroundColor:"#ddd"},children:[(0,t.jsx)(s.Z,{sx:{textTransform:"none",backgroundColor:"#333333",color:"#eee",mb:"10px"},onClick:()=>y(!0),children:"Tambah Produk"}),(0,t.jsx)(l.Z,{component:c.Z,children:(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(u.Z,{children:(0,t.jsxs)(h.Z,{sx:{backgroundColor:"#FFB6C1"},children:[(0,t.jsx)(x.Z,{align:"center",width:"100px",children:"No"}),(0,t.jsx)(x.Z,{children:"Title"}),(0,t.jsx)(x.Z,{children:"Price"}),(0,t.jsx)(x.Z,{align:"center",children:"Image"}),(0,t.jsx)(x.Z,{align:"center",children:"Action"})]})}),(0,t.jsx)(m.Z,{children:e.map((e,n)=>(0,t.jsxs)(h.Z,{children:[(0,t.jsx)(x.Z,{align:"center",children:n+1}),(0,t.jsx)(x.Z,{children:e.name}),(0,t.jsx)(x.Z,{children:e.price}),(0,t.jsx)(x.Z,{align:"center",children:(0,t.jsx)("img",{src:e.image,width:"auto",height:"240px"})}),(0,t.jsxs)(x.Z,{align:"center",children:[(0,t.jsx)(s.Z,{sx:{textTransform:"none",backgroundColor:"#FFFF00",color:"#111",mr:{md:"10px",xs:"0"}},onClick:()=>{k(e),S(!0)},children:"Edit"}),(0,t.jsx)(s.Z,{sx:{textTransform:"none",backgroundColor:"#B22222",color:"#eee"},onClick:()=>{b(null==e?void 0:e.id),T(!0)},children:"Hapus"})]})]},e.id))})]})})]}),(0,t.jsx)(p.Z,{open:P,onClose:()=>T(!1),sx:{width:{md:"30%",xs:"80%"},margin:"auto",display:"flex",alignItems:"center",justifyContent:"center",height:"40%",borderRadius:"10px"},children:(0,t.jsx)(a.Z,{sx:{width:"100%",height:"fit-content",backgroundColor:"#fff",position:"absolute",top:"0",left:"0",zIndex:100,borderRadius:"10px"},children:(0,t.jsx)(a.Z,{sx:{width:"100%",height:"fit-content",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsxs)(a.Z,{sx:{width:"80%",height:"fit-content",backgroundColor:"#fff",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",p:2},children:[(0,t.jsx)(f.Z,{severity:"error",sx:{width:"100%"},children:"Apakah anda yakin ingin menghapus produk ini?"}),(0,t.jsxs)(a.Z,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",mt:2},children:[(0,t.jsx)(s.Z,{sx:{textTransform:"none",backgroundColor:"#B22222",color:"#eee",mr:2},onClick:()=>T(!1),children:"Tidak"}),(0,t.jsx)(s.Z,{sx:{textTransform:"none",backgroundColor:"#FFFF00",color:"#111"},onClick:()=>A(C),children:"Ya"})]})]})})})}),(0,t.jsx)(j.default,{open:i,handleClose:()=>{y(!1)},setAlert:e=>I(e)}),(0,t.jsx)(g.Z,{open:E.open,autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},style:{width:"40%"},onClose:()=>I({...E,open:!1}),children:(0,t.jsx)(f.Z,{severity:E.severity,sx:{display:"flex",width:"95%",color:"#2E7D32",textAlign:"left",fontWeight:"500"},children:E.message})}),(0,t.jsx)(v.default,{open:F,handleClose:()=>{S(!1)},setAlert:e=>I(e),selectedProduct:w||void 0})]})}},7084:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return Z}});var t=i(5893),r=i(5843),o=i(7357),a=i(5861),s=i(6886),l=i(89),c=i(7109),d=i(3946),u=i(9576),h=i(9417),x=i(1170),m=i(2175),p=i(6310),f=i(9881),g=i(6650),j=i(5121);function Z(e){var n,i;let{open:Z,handleClose:v,setAlert:y}=e,C=p.Ry({name:p.Z_().required("Name is required"),price:p.Rx().required("Price is required"),image:p.Z_().required("Image is required")}),b=(0,m.TA)({initialValues:{name:"",price:0,image:""},validationSchema:C,onSubmit:e=>{w()}}),w=async()=>{let e=null==b?void 0:b.values;try{await j.Z.post("/api/product",{name:null==e?void 0:e.name,price:Number(null==e?void 0:e.price),image:null==e?void 0:e.image}),v(),b.resetForm(),y({open:!0,severity:"success",message:"Berhasil Tambah Product"})}catch(e){console.error("Error:",e)}},k=async e=>{var n,i;let t=null===(n=e.target.files)||void 0===n?void 0:n[0];if(console.log(null===(i=e.target.files)||void 0===i?void 0:i[0]),t){let e=(0,g.iH)(f.t,"images/".concat(t.name));try{await (0,g.KV)(e,t);let n=await (0,g.Jt)(e);b.setFieldValue("image",n),console.log("Download URL:",n)}catch(e){console.error("Error uploading or getting download URL:",e)}}};return(0,t.jsx)(r.Z,{open:Z,onClose:v,sx:{width:{md:"30%",xs:"80%"},margin:"auto",display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,t.jsxs)(o.Z,{sx:{backgroundColor:"#ffffff",width:"100%",height:"fit-content",p:2,color:"#000"},children:[(0,t.jsx)(a.Z,{variant:"h6",component:"h2",sx:{textAlign:"center",fontWeight:"700",fontSize:"30px"},children:"Tambah Product"}),(0,t.jsxs)("form",{onSubmit:b.handleSubmit,children:[(0,t.jsx)(s.ZP,{item:!0,xs:12,sm:12,display:"flex",justifyContent:"center",mt:4,children:(null==b?void 0:null===(n=b.values)||void 0===n?void 0:n.image)&&(0,t.jsx)("img",{src:null==b?void 0:null===(i=b.values)||void 0===i?void 0:i.image,width:"90%",height:"240px"})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,sm:12,display:"flex",justifyContent:"center",children:(0,t.jsx)(l.Z,{type:"file",onChange:k,sx:{width:"240px"},inputProps:{accept:"image/*"},endAdornment:(0,t.jsx)(c.Z,{position:"end",children:(0,t.jsxs)(d.Z,{component:"label",htmlFor:"upload-image","aria-label":"upload picture",edge:"end",children:[(0,t.jsx)(x.Z,{}),(0,t.jsx)("input",{id:"upload-image",type:"file",accept:"image/*",style:{display:"none"},onChange:k})]})})})}),(0,t.jsxs)(s.ZP,{container:!0,spacing:2,sx:{mt:2},children:[(0,t.jsx)(s.ZP,{item:!0,xs:12,sm:12,children:(0,t.jsx)(u.Z,{fullWidth:!0,id:"name",name:"name",label:"Name",value:b.values.name,onChange:b.handleChange,error:b.touched.name&&!!b.errors.name,helperText:b.touched.name&&b.errors.name})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,sm:12,children:(0,t.jsx)(u.Z,{fullWidth:!0,id:"price",name:"price",label:"Price",value:b.values.price,onChange:b.handleChange,error:b.touched.price&&!!b.errors.price,helperText:b.touched.price&&b.errors.price})})]}),(0,t.jsxs)(s.ZP,{container:!0,spacing:2,sx:{mt:2},display:"flex",justifyContent:"center",alignItems:"center",children:[(0,t.jsx)(h.Z,{variant:"contained",onClick:v,sx:{textTransform:"none",backgroundColor:"#333333",color:"#fff",mr:"10px"},children:"Cancel"}),(0,t.jsx)(h.Z,{variant:"contained",type:"submit",sx:{textTransform:"none",backgroundColor:"#22ee55",color:"#fff"},children:"Save"})]})]})]})})}},5481:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return v}});var t=i(5893),r=i(5843),o=i(7357),a=i(5861),s=i(6886),l=i(89),c=i(7109),d=i(3946),u=i(9576),h=i(9417),x=i(1170),m=i(2175),p=i(6310),f=i(9881),g=i(6650),j=i(7294),Z=i(5121);function v(e){var n,i;let{open:v,handleClose:y,setAlert:C,selectedProduct:b}=e,w=p.Ry({name:p.Z_().required("Name is required"),price:p.Rx().required("Price is required"),image:p.Z_().required("Image is required")}),k=(0,m.TA)({initialValues:b||{name:"",price:0,image:""},validationSchema:w,onSubmit:e=>{P()}}),P=async()=>{let e=null==k?void 0:k.values;try{await Z.Z.put("/api/product/".concat(null==b?void 0:b.id),{name:null==e?void 0:e.name,price:Number(null==e?void 0:e.price),image:null==e?void 0:e.image}),y(),C({open:!0,severity:"success",message:"Berhasil Ubah Product"})}catch(e){console.error("Error:",e)}},T=async e=>{var n,i;let t=null===(n=e.target.files)||void 0===n?void 0:n[0];if(console.log(null===(i=e.target.files)||void 0===i?void 0:i[0]),t){let e=(0,g.iH)(f.t,"images/".concat(t.name));try{await (0,g.KV)(e,t);let n=await (0,g.Jt)(e);k.setFieldValue("image",n),console.log("Download URL:",n),k.resetForm()}catch(e){console.error("Error uploading or getting download URL:",e)}}};return(0,j.useEffect)(()=>{b&&(k.setFieldValue("name",b.name),k.setFieldValue("price",b.price),k.setFieldValue("image",b.image))},[b]),(0,t.jsx)(r.Z,{open:v,onClose:y,sx:{width:{md:"30%",xs:"80%"},margin:"auto",display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,t.jsxs)(o.Z,{sx:{backgroundColor:"#ffffff",width:"100%",height:"fit-content",p:2,color:"#000"},children:[(0,t.jsx)(a.Z,{variant:"h6",component:"h2",sx:{textAlign:"center",fontWeight:"700",fontSize:"30px"},children:"Tambah Product"}),(0,t.jsxs)("form",{onSubmit:k.handleSubmit,children:[(0,t.jsx)(s.ZP,{item:!0,xs:12,sm:12,display:"flex",justifyContent:"center",mt:4,children:(null==k?void 0:null===(n=k.values)||void 0===n?void 0:n.image)&&(0,t.jsx)("img",{src:null==k?void 0:null===(i=k.values)||void 0===i?void 0:i.image,width:"auto",height:"240px"})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,sm:12,display:"flex",justifyContent:"center",children:(0,t.jsx)(l.Z,{type:"file",onChange:T,sx:{width:"240px"},inputProps:{accept:"image/*"},endAdornment:(0,t.jsx)(c.Z,{position:"end",children:(0,t.jsxs)(d.Z,{component:"label",htmlFor:"upload-image","aria-label":"upload picture",edge:"end",children:[(0,t.jsx)(x.Z,{}),(0,t.jsx)("input",{id:"upload-image",type:"file",accept:"image/*",style:{display:"none"},onChange:T})]})})})}),(0,t.jsxs)(s.ZP,{container:!0,spacing:2,sx:{mt:2},children:[(0,t.jsx)(s.ZP,{item:!0,xs:12,sm:12,children:(0,t.jsx)(u.Z,{fullWidth:!0,id:"name",name:"name",label:"Name",value:k.values.name,onChange:k.handleChange,error:k.touched.name&&!!k.errors.name,helperText:k.touched.name&&k.errors.name})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,sm:12,children:(0,t.jsx)(u.Z,{fullWidth:!0,id:"price",name:"price",label:"Price",value:k.values.price,onChange:k.handleChange,error:k.touched.price&&!!k.errors.price,helperText:k.touched.price&&k.errors.price})})]}),(0,t.jsxs)(s.ZP,{container:!0,spacing:2,sx:{mt:2},display:"flex",justifyContent:"center",alignItems:"center",children:[(0,t.jsx)(h.Z,{variant:"contained",onClick:y,sx:{textTransform:"none",backgroundColor:"#333333",color:"#fff",mr:"10px"},children:"Cancel"}),(0,t.jsx)(h.Z,{variant:"contained",type:"submit",sx:{textTransform:"none",backgroundColor:"#22ee55",color:"#fff"},children:"Save"})]})]})]})})}}},function(e){e.O(0,[259,457,668,174,833,218,2,774,888,179],function(){return e(e.s=4830)}),_N_E=e.O()}]);